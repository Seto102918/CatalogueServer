"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[659],{7967:function(e,a,t){t.r(a),t.d(a,{default:function(){return p}});var n=t(4165),s=t(5861),l=t(885),r=t(2791),o=t(6871),i=t(4569),c=t.n(i),d=t(6765),u=(t(165),t(184));function m(e){return(0,u.jsxs)(d.sj,{visibleSlides:1,totalSlides:e.urlArrayId.length,step:1,naturalSlideWidth:1,naturalSlideHeight:1,hasMasterSpinner:!0,lockOnWindowScroll:!0,className:"bg-dark bg-opacity-25 backdrop_blur rounded overflow-hidden col p-0 m-0",style:{aspectRatio:"1"},children:[(0,u.jsx)(d.iR,{className:"m-0",children:e.urlArrayId.map((function(e,a){return(0,u.jsx)(d.Mi,{index:a,children:(0,u.jsx)(d.Ee,{src:e,className:"imageWZoom"})},a)}))}),(0,u.jsx)(d.jp,{className:"position-absolute top-50 start-0 translate-middle-y d-grid mx-lg-3 btn btn-link",children:(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"42",height:"42",fill:"white",className:"bi bi-arrow-left",viewBox:"0 0 16 16",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})})}),(0,u.jsx)(d.P1,{className:"position-absolute top-50 end-0 translate-middle-y d-grid mx-lg-3 btn btn-link",children:(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"42",height:"42",fill:"white",className:"bi bi-arrow-right",viewBox:"0 0 16 16",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"})})}),(0,u.jsx)("div",{className:"position-absolute bottom-0 start-50 translate-middle-x",children:e.urlArrayId.map((function(e,a){return(0,u.jsx)(d.oT,{slide:a,className:"btn btn-light my-3 mx-1"},a)}))})]})}var h=t(1138);function p(){var e=(0,o.UO)(),a=(0,o.s0)(),t=(0,r.useState)(e.id),i=(0,l.Z)(t,2),d=i[0],p=(i[1],(0,r.useState)({_id:"",kode:"",warna:"",harga:"",favorit:"",kategori:"",urlArray:[]})),f=(0,l.Z)(p,2),x=f[0],b=f[1],g=(0,r.useState)(""),j=(0,l.Z)(g,2),w=j[0],v=j[1],N=(0,r.useState)([]),k=(0,l.Z)(N,2),y=k[0],S=k[1],F=(0,r.useState)(!1),C=(0,l.Z)(F,2),Z=C[0],A=C[1],I=(0,r.useState)(!1),T=(0,l.Z)(I,2),E=T[0],O=T[1],R=(0,r.useState)(!0),W=(0,l.Z)(R,2),D=W[0],H=W[1],L=(0,r.useState)(!1),_=(0,l.Z)(L,2),M=_[0],P=_[1],U=(0,r.useRef)();(0,r.useEffect)((function(){var e=new AbortController,a=e.signal,t="".concat(h.h,"api/v1/gown/kode/").concat(d);return c().get(t,{signal:a}).then((function(e){b(e.data.gownFound[0]),S(e.data.gownFound[0].urlArray),v(e.data.gownFound[0]._id),O(e.data.gownFound[0].favorit)})).catch((function(e){c().isCancel(e)?console.log("Cancelled"):"Network Error"===e.message?alert("Cant connect to server.\nPlease try again later and if problem persist, please contact us through Whatsapp.\n(Link on the bottom of the page)"):console.log(e)})).finally((function(){return setTimeout((function(){H(!1)}),2500)})),function(){return e.abort()}}),[]);var z=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete"),t={id:w,kode:d},e.next=4,fetch(h.h+"admin/delete",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")},body:JSON.stringify(t)}).then((function(e){200===e.status?(console.log("Success"),alert("Change Applied"),a("/")):401===e.status?(alert(e.status+" - "+e.statusText),a("/login")):alert(e.status+" - "+e.statusText)})).catch((function(e){alert("Failed to Delete...")}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),t.preventDefault(),e.next=4,fetch(h.h+"admin/edit",{method:"POST",body:new FormData(U.current),headers:{"x-access-token":localStorage.getItem("token")}}).then((function(e){200===e.status?(console.log("Success"),alert("Change Applied"),a("/")):401===e.status?(alert(e.status+" - "+e.statusText),a("/login")):alert(e.status+" - "+e.statusText)})).catch((function(e){alert("Failed to edit...")})).finally((function(){return setTimeout((function(){H(!1)}),2500)}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{style:{overflowX:"hidden"},className:"mt-2",children:(0,u.jsx)("div",{className:"d-flex justify-content-center",children:(0,u.jsxs)("div",{className:"row row-cols-1 justify-content-around my-2 ".concat(M?"row-cols-md-2 container-fluid":"row-cols-md-1"," p-2"),children:[(0,u.jsx)("div",{className:"col col-md-6",children:M?(0,u.jsx)(m,{urlArrayId:y}):(0,u.jsx)("span",{})}),(0,u.jsxs)("form",{className:"col",onSubmit:function(e){return B(e)},ref:U,children:[(0,u.jsxs)("h1",{className:"h1 text-center mt-2",children:["Edit ",(0,u.jsxs)("span",{className:" h3 text-muted",children:[" ",d," "]})]}),(0,u.jsxs)("button",{type:"button",className:"btn btn-dark mt-2 container-fluid",onClick:function(){return P(!M)},children:[M?"Close ":"Open ","Image Carousel"]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-sm-8",children:[(0,u.jsx)("label",{className:"mb-1",htmlFor:"kodeInp",children:"Kode"}),(0,u.jsx)("input",{className:"container-fluid border rounded p-2 mb-1 bg-dark bg-opacity-25 focusNone text-white",id:"kodeInp",type:"text",readOnly:"readonly",value:d,name:"kode","aria-label":"Edit"})]}),(0,u.jsxs)("div",{className:"col-sm-4 d-flex align-items-center",children:[(0,u.jsx)("input",{className:"form-check-input",type:"checkbox",name:"favorit",id:"flexCheckChecked",value:"true",onChange:function(){return O(!E)},checked:E,"aria-label":"Edit"}),(0,u.jsx)("label",{className:"form-check-label m-1",htmlFor:"flexCheckChecked",children:"Favorit"})]})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col",children:[(0,u.jsx)("label",{className:"mb-1",htmlFor:"warnaInp",children:"Warna"}),(0,u.jsx)("input",{className:"form-control",id:"warnaInp",type:"text",placeholder:x.warna,name:"warna","aria-label":"Edit"})]}),(0,u.jsxs)("div",{className:"col",children:[(0,u.jsx)("label",{className:"mb-1",htmlFor:"hargaInp",children:"Harga"}),(0,u.jsxs)("div",{className:"input-group",children:[(0,u.jsx)("span",{className:"input-group-text bg-dark bg-opacity-25 text-white",id:"hargaInp",children:"Rp."}),(0,u.jsx)("input",{className:"form-control",id:"hargaInp",type:"number",placeholder:x.harga,name:"harga","aria-label":"Edit",min:0,onWheel:function(e){return e.target.blur()}})]})]})]}),(0,u.jsx)("hr",{}),(0,u.jsx)("div",{className:"row row-col-2",children:y.map((function(e,a){return(0,u.jsxs)("div",{className:"mb-2 col-12 col-sm-6 col-md-12 col-lg-6",children:[(0,u.jsx)("label",{className:"mb-1",htmlFor:"urlArray",children:0===a?"Ubah Foto Utama":"Ubah Foto ke-".concat(a+1)},"label"+a),(0,u.jsx)("a",{className:"ms-3",target:"_blank",rel:"noreferrer",href:e,id:"urlArray",children:"Link Foto"}),(0,u.jsx)("input",{className:"form-control ",id:"tambahFoto",type:"file",name:"change_"+a,"aria-label":"Edit",accept:".jpg, .jpeg"})]},"div"+a)}))}),(0,u.jsx)("hr",{}),(0,u.jsx)("label",{className:"mb-1",htmlFor:"tambahFoto",children:"Tambah Foto"}),(0,u.jsx)("input",{className:"form-control mb-4",id:"tambahFoto",type:"file",name:"add","aria-label":"Edit",multiple:!0,accept:".jpg, .jpeg"}),(0,u.jsx)("p",{children:"*Foto tidak akan update secara langsung disini, karena cache msh menyimpan foto lama."}),(0,u.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[(0,u.jsx)("button",{className:"btn btn-primary",disabled:!!D,children:D?"Loading...":"Submit"}),(0,u.jsx)("button",{className:"btn btn-danger",type:"button",disabled:!!D,onClick:function(){console.log(Z),Z?z():A(!0)},children:Z?"Are You Sure?":"Delete Gown Data"})]})]})]})})})}}}]);
//# sourceMappingURL=659.df88d6f7.chunk.js.map